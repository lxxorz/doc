# GAMES 101

## Transform
### 旋转变换
首先，复习一下初中知识之三角函数
$$
\begin{align} \\
\sin(\alpha+\theta)=\sin \alpha \cos \theta+\cos \alpha \sin \theta\\ \\
\cos(\alpha+\theta)=\cos \alpha \cos \theta-\sin \alpha \sin \theta
\end{align}
$$
设初始向量 $\vec{v}=(x,y,z)^T$，其中 $x,y$ 可以分别被表示为
$$
\left\{
\begin{aligned}
  x &= r\cos \alpha \\
  y &= r\sin \alpha
\end{aligned}
\right.

$$
那么旋转 $\theta$ 角度之后的向量 $\vec{v'}=(x',y',z)^{T}$ 就可以被表示为 $(r\cos (\alpha+\theta),r\sin(\alpha+\theta),z)$，展开就是
$$
\left\{
\begin{align}
 x &= r(\cos \alpha\cos \theta-\sin \alpha\sin \theta) \\
 y &= r(\sin \alpha \cos \theta+\cos \alpha \sin \theta)	
\end{align}
\right.
$$
也就是
$$
\left\{
\begin{align}
	x' &= x\cos \theta-y\sin \theta \\
	y' &= y\cos \theta+x\sin \theta
\end{align}
\right.
$$

$$
R_{\theta}=\begin{pmatrix}
\cos \theta & -\sin \theta \\
\sin \theta & \cos \theta
\end{pmatrix}

\begin{pmatrix}
x \\
y
\end{pmatrix}
$$


如果旋转 $-\theta$ ，那么旋转矩阵就是
$$
R_{-\theta}=\begin{pmatrix}
\cos \theta & \sin \theta \\
-\sin \theta & \cos \theta
\end{pmatrix}$$
其实这个就是旋转 $\theta$ 的转置矩阵 $R_{-\theta}=R_{\theta}^T$，另外这也是旋转矩阵的逆矩阵 $R_{\theta}R_{\theta}^-1=I$，这样性质的矩阵也被称为“正交矩阵”。[[图形学入门相关数学证明#旋转矩阵]]



### 平移变换

旋转、或者缩放 都可以用一个转换矩阵来表示。但是位移则不同，以向 X 轴平移 1 个单位为例 $T(1,0)$，则需要
$$
\begin{pmatrix}
x' \\
y'
\end{pmatrix} = \begin{pmatrix}
a & b \\
c & d
\end{pmatrix}\begin{pmatrix}
x \\
y
\end{pmatrix}+\begin{pmatrix}
1 \\
0
\end{pmatrix}
$$
可以看到平移不能仅通过矩阵乘法来实现，他需要对矩阵做加法，因为它不属于[[线性变换]]（linear transformations）的范畴，是属于仿射变换 (affine transformations）的一种，为了不把平移当作特殊的变换，引入了**齐次坐标**，所谓的齐次坐标在原来矩阵的基础之上增加一个维度。
$$
\begin{pmatrix}
a & b & 1 \\
c & d & 0 \\
0 & 0 & 1
\end{pmatrix}\begin{pmatrix}
x \\
y \\
1
\end{pmatrix}=\begin{pmatrix}
x+1 \\
y \\
1
\end{pmatrix}
$$
可以看到，现在不管是旋转还是平移都是 $T\vec{V}$ 的形式（即一个转换矩阵乘以一个向量），写成一般形式就是
$$
\begin{pmatrix}
a & b & t_{x} \\
c & d & t_{y} \\
0 & 0 & 1
\end{pmatrix}\begin{pmatrix}
x \\
y \\
1
\end{pmatrix}=\begin{pmatrix}
x+t_{x} \\
y+t_{y} \\
1
\end{pmatrix}
$$
如果为了保持向量的**平移不变性**，可以将最后一维设置成 0。



## Transform Cont.

### Viewing Transformations

### 3D Rotation
在三维空间中最简单的旋转绕 xyz 轴进行旋转。和二维空间类似, 
![[right-hand-rule.png|300]]
1. 假设旋转轴是 x 轴，三维空间的旋转矩阵就是
$$
R_{\theta}=\begin{pmatrix}
1 & 0 & 0 & 0 \\
0 & \cos \theta & -\sin \theta & 0  \\
0 & \sin \theta & \cos \theta & 0 \\
0 & 0 & 0 & 1
\end{pmatrix}
$$

2. 假设旋转轴是 y 轴，三维空间的旋转矩阵就是
$$
R_{\theta}=\begin{pmatrix}

\end{pmatrix}
$$

## 术语

| 名词                  | 解释     |
| --------------------- | -------- |
| translation           | 位移     |
| transform             | 变换     |
| affine transformation | 仿射变换 |
| linear transformation | 线性变换 |

